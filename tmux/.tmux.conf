set-option -sa terminal-features ',xterm-256color:RGB'
set-option -sg escape-time 10
set-option -g focus-events on
set-option -g detach-on-destroy off
set-option -g renumber-windows on
set -g allow-passthrough on

set-window-option -g mode-keys vi
set -g mouse on

# Key bindings
unbind-key -T prefix t # unbind big clock
bind-key \" split-window -v \; resize-pane -y 10 # resize horizontal split

# Custom keybinds
bind-key F display-popup -E "tmux switch-client -t $(tmux list-sessions | sed -E 's/:.*$//' | fzf)"
bind-key f display-popup -E "$(bash ,tmux-session)" # open new session
bind-key G display-popup -E -w 95% -h 95% "lazygit" # lazygit
bind-key T display-popup -E -h 80% -w 90% "bash ,task" # list tasks
bind-key P run-shell "nohup bash ,pomo > /dev/null 2>&1 &" # start pomodoro

# vim-mode copy/paste
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'

# Start counting pane and window number at 1
set -g base-index 1
setw -g pane-base-index 1

# Statusline
set -g status on
bind ' ' set -g status
set -g status-interval 60
set-option -g status-position bottom

# Basic status bar colors
set -g status-bg default
set -g status-fg white
set -g status-style bg=default,fg=white

# Window Statusline
set-option -g automatic-rename-format "#(,icons #{pane_current_command} #{window_panes}) #{pane_current_command}"
setw -g window-status-style "fg=colour8"
set -g window-status-format " #W"

# Highlight the current window.
setw -g window-status-current-style "fg=default"
set -g window-status-current-format "#{?pane_in_mode,#[fg=colour11],}#{?client_prefix,#[fg=colour167],} #W"

# Left Statusline
set -g status-left-length 80
set -g status-left-style default
set -g status-left-style "fg=default"
set -g status-left ""

# Right Statusline
set -g status-right-length 120
set -g status-right-style default
set -g status-right "\
#[fg=colour8]#(cat /tmp/tmuxmessage | head -n 1 | cut -c1-100)  #[default]\
#[fg=colour3]#(cat /tmp/pomo_status 2>/dev/null)#[default]\
#(printf \uF07C)  #S "

# Reload config keymap
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."
